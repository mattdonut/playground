<template id="cowTemplate" bind="{{ data }}">
    <style>
        .name {
            color: red;
        }
    </style>
    <div class="cow">
        <h1>Name</h1>
        <h2 class="name">
            <span id="name">Milksy</span>
        </h2>
        <div>
            <span id="clicks">0</span>
        </div>
    </div>
</template>

<script>
    var protoCow = Object.create(HTMLElement.prototype)
    var template = document.currentScript.ownerDocument.querySelector('#cowTemplate');

    protoCow.createdCallback = function(e) {
        console.log('A cow is born!', this);
        var root = this.createShadowRoot();
        var t = template.content.cloneNode(true)
        t.querySelector('#name').textContent = this.attributes['data-name'].value
        Object.observe(this, function (changes) {
            var change = changes.pop()
            change.object.shadowRoot.querySelector('#clicks').textContent = change.object.clicks
        })
        this.clicks = parseInt(this.attributes['data-clicks'].value)
        root.appendChild(t);
    }

    var Cow = document.registerElement('x-cow', {
        prototype: protoCow
    })
</script>
